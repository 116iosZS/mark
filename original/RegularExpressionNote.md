# 正则表达式语句以及应用

- [字面值(literals)](#字面值)
- [句点(dot)](#句点)
- [字符类(character classes)](#字符类) 
- [字符类区间(ranges)](#字符类区间)
- [字符类的否定(negation)](#字符类的否定)
- [字符类补充](#字符类补充)
- [乘法器(multipliers)](#乘法器)
- [乘法器区间](#乘法器区间)
- [乘法器补充](#乘法器补充)
- [惰性(non-greed)](#惰性)
- [分支(alternation)](#分支)
- [组合(grouping)](#组合)
- [单词边界(word boundaries)](#单词边界)
- [行边界(line boundaries)](#行边界)

## 字面值

- 正则表达式由只代表自身的字面值和代表特定含义的元字符组成
- 大部分字符，包括字母数字字符，会以字面值的形式出现,这意味着它们查找的是自身
- 除非特别说明，正则表达式是区分大小写的

## 句点

- 任何单个字符
- 任何元字符使用一个饭斜杠\进行转义就会编程字面值
- 饭斜杠是一个元字符，他也可以使用饭斜杠转义

`NOTICE`: 在一些实现中，`.`会匹配除了换行符的任意字符
	
## 字符类

字符类是在方括号中国年的集合, 表示“找到集合里任意一个字符”

- `c[aeiou]t`标识找到c后跟一个元音字母，再找到t，会匹配`cat`, `cet`, `cit`, `cot`, `cut`
- `[0123456789]`表示找到一个数字
- `[a]`和`a`表示意义相同，找到a
- `\[a\]`表示找到一个做左扩号后紧跟着一个a，再跟着一个右方括号
- `[\[\]ab]`表示“匹配一个左方括号或者右方括号或者a或者 b”
- `[\\\[\]]`表示“匹配一个反斜杆或者一个左方括号或者一个右方括号”

`NOTICE`: 在字符类内部的“规则”和在字符类内部的规则有所不同
一些字符在字符类内部扮演着元字符的角色，但在字符类外部则充当字面值。
还有一些字符做着相反的事。一些字符在两种情形都为元字符，但在各自情形里代表不同的含义
特别地, `.`表示“匹配任意字符”，但是`[.]`表示“匹配句点”。不能并为一谈。

## 字符类区间

- `[b-f]`和`[bcdef]`都表示“找到一个b或c或d或 e或f”
- `[A-Z]`和`[ABCDEFGHIJKLMNOPQRSTUVWXYZ]`都表示“匹配大写字母”
- `[1-9`]和`[123456789]`都表示“匹配一个非零数字”
- `[0-9.,]`表示“匹配一个数字或者一个句点或者一个逗号”
- `[0-9a-fA-F]`表示“匹配一位十六进制数”
- `[a-zA-Z0-9\-]`表示“匹配一个字母数字字符或连字符”

`NOTICE`: 区间是字符的区间，不是数字的区间。正则表达式[1-31]表示“找到一个1或一个 2或一个3”，
不是"找到一个从1到31的整数"

## 字符类的否定

在最开始的位置使用插入符号(^)来否定一个字符类

- `[^a]`表示“匹配除了a的任意字符”
- `[^a-zA-Z0-9]`表示“找到一个非字母也非数字的字符”
- `[\^abc]`表示“找到一个插入符或者a或者b或者c”
- `[^\^]`表示“找到除了插入符外的任意字符”

## 字符类补充

- `\d`含义与`[0-9]`一致：“匹配一个数字”
- `\w`的含义与`[0-9A-Za-z_]`一致：“匹配一个单词字符
- `\s`表示“匹配任意空白字符，空格，tab，回车或者换行
- `\D`同[^0-9]：“匹配任意非数字的字符”
- `\W`同[^0-9A-Za-z_]：“匹配任意非单词字符, 匹配任意不是字母，数字，下划线，汉字的字符
- `\S`表示“匹配任意不是空白符的字符”

## 乘法器

在一个字面值或者字符类后跟着一个大括号来使用乘法器(量词)

- `{1}`同a，表示“匹配一个a”
- `a{3}`表示“找到一个a后再跟一个a，最后找到一个a”
- `a{0}`表示“匹配空字符”
- `a\{2\}`代表“找到一个a，跟着一个左大括号，接着跟匹配一个2，然后跟着一个右大括号”
- 在字符类中大括号没有特别的含义。`[{}]`代表“匹配一个左大括号或者一个右大括号”

`NOTICE`: 乘法器没有记忆。该正则表达式`[abc]{2}`表示“匹配a或者b或者c，接着匹配a或者b或者c。这跟“匹配aa或ab或ac或ba或bb或bc或ca或cb或cc”相同。这跟“匹配aa或bb或cc”含义不同

## 乘法器区间

- `x{4,4}`跟`x{4}`一样
- `colou{0,1}`r表示“匹配colour或color 
- `a{3,5}`表示“匹配aaaaa或aaaa或aaa” 
	- 乘法器是贪婪的，优先匹配较长的
- `a{1,}`表示“在一列中找到一个或多个a”
- `.{0,}`表示“匹配任何情形”

`PRACTICE`: 

- 编写一个能匹配双引号字符串的正则表达式,同时该字符串可以拥有任意数量的字符, `".{0,}"`
- 修改上面的正则表达式，来找到了双引号字符串，但它们之间没有多余的双引号, `"[^"]{0,}"` 

## 乘法器补充

- `?`代表的含义与`{0,1}`相同
- `*`等于`{0,}`
- `+`等于`{1,}`
- `\?\*\+`表示“匹配一个问号，接着找到一个星号，然后跟着一个加号”
- `[?*+]`表示“找到一个问号或者一个星号或者一个加号”

## 惰性

正则表达式`".*"`表示“找到一个双引号，接着找到尽可能多的字符，最后再找到一个双引号”。注意一下被`.*`匹配的内部字符，很可能包含多个双引号。这通常不是非常有用

- `\d{4,5}?`表示“匹配`\d\d\d\d`或`\d\d\d\d\d`”。其实跟`\d{4}`行为一致
- `colou??r`就是`colou{0,1}?r`，表示“找到`color`或`colour`”。和`colou?r`行为一致
- `.*?"`表示“匹配一个双引号，跟着一个尽可能少的字符，再跟着一个双引号”

## 分支

使用管道符号来实现匹配多种选择

- `cat|dog`表示“匹配cat或dog”
- `red|blue|`和red||blue以及|red|blue都是同样的意思，“匹配red或blue或空字符串”
- `a|b|c`跟`[abc]`一样
- `cat|dog|\|`表示“匹配cat或dog或管道符号”
- `[cat|dog]`表示“找到a或c或d或d或g或o或t或一个管道符号”

`PRACTICE`: 编写一个正则表达式匹配1到31（含）之间的整数 `[1-9]|[12][0-9]|3[01]`

## 组合

- 在一周中找到一天，使用`(Mon|Tues|Wednes|Thurs|Fri|Satur|Sun)day`
- `(\w*)ility`等同于`\w*ility`
- `\(\)`表示“匹配一个左圆括号后，再匹配一个右圆括号”
- `[()]`表示“匹配一个左圆括号或一个右圆括号”
- `(red|blue|)`表示“匹配red或blue或空字符串”
- `abc()def`等同于`abcdef`
- `(red|blue)?`等同于`(red|blue|)`
- `\w+(\s+\w+)*`代表“找到一个或多个单词，它们以空格隔开

## 单词边界

单词边界是一个单词字符和非单词字符之间的位置。记住，一个单词字符是`\w`，它是`[0-9A-Za-z_]`，一个非单词字符是`\W`，也就是`[^0-9A-Za-z_]`

文本的开头和结尾总是当作单词边界

- 正则表达式`\b`表示“匹配一个单词边界”
- `\b\w\w\w\b`表示“匹配一个三个字母的单词”
- `a\ba表`示“找到`a`，跟着一个单词边界，接着找到`b`”

## 行边界

文本不是以换行符结束，而是以行结束。然而，任何行，包括最后一行，可以包含零个字符。
起始行位置是在一个换行符和下一行的第一个字符之间。与单词边界一样，在文本的开头也算作一个起始的行。
结束行位置是在行的最后一个字符和换行符之间。与单词边界一样，文本结束也算作行结束

- 起始行，行，结束行
- 换行
- 开始行，行，结束行
- 换行
- ...
- 换行
- 开始行，行，结束行

在此基础上：

- 正则表达式`^`表示“匹配开始行”
- 正则表达式`$`表示“匹配结束行”
- `^$`表示“匹配空行”
- `^.*$`将会匹配整个文本，因为换行符是一个字符，所以`.`会匹配它。为了匹配单行，要使用惰性乘法器，`^.*?$`
- `\^\$`表示“匹配尖符号后跟着一个美元符号”
- `[$]`表示“匹配一个美元符”
- `[^]`是非法单正则表达式
- 尖符号在方括号中时有不同的特殊含义。把尖符号放在字符类中，这么用`[\^]`








